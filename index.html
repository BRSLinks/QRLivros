<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redirecionando…</title>
  <style>
    body { margin:0; font-family:Segoe UI, sans-serif; background:#fff; color:#333; text-align:center; }
    header { padding: 28px 18px 8px; }
    h1 { font-size: 1.6rem; margin: 0 0 8px; }
    p { color:#666; margin: 0 0 16px; }
    .box { padding: 14px; }
    .hint { font-size: .95rem; color:#777; }
    .btn {
      display:inline-block; margin-top:14px;
      background:#ff9900; color:#fff; text-decoration:none;
      padding:12px 18px; border-radius:999px; font-weight:700;
    }
  </style>
</head>
<body>
  <header>
    <h1>Preparando seu acesso…</h1>
    <p>Vamos abrir o produto na Shopee e depois te levar ao cardápio.</p>
  </header>

  <div class="box">
    <p id="status" class="hint">⏳ Abrindo Shopee em 2 segundos…</p>

    <!-- fallback caso algum navegador bloqueie algo -->
    <a id="btnShopee" class="btn" href="#" rel="noopener">Abrir Shopee agora</a>
    <br/>
    <a id="btnCardapio" class="btn" href="#" style="background:#222; margin-left:8px;">Ir para o cardápio</a>
  </div>

  <script>
    // ✅ 1) Coloque aqui seus links
    const SHOPEE_URL   = "https://s.shopee.com.br/9pYqUIGHzn";
    const CARDAPIO_URL = "https://SEU-CARDAPIO-AQUI.com"; // <-- TROQUE AQUI

    // ✅ 2) Configurações
    const ABRIR_SHOPEE_EM_MS = 2000;   // 2 segundos
    const CHAVE_FLAG = "fluxo_shopee_aberto";

    // Fallback botões
    document.getElementById("btnShopee").href = SHOPEE_URL;
    document.getElementById("btnCardapio").href = CARDAPIO_URL;

    const statusEl = document.getElementById("status");

    // Marca que vamos abrir a Shopee
    localStorage.setItem(CHAVE_FLAG, "0");

    // Abre Shopee automaticamente na mesma aba
    setTimeout(() => {
      statusEl.textContent = "✅ Abrindo Shopee… (quando voltar, você irá para o cardápio)";
      localStorage.setItem(CHAVE_FLAG, "1");
      window.location.href = SHOPEE_URL; // mesma aba
    }, ABRIR_SHOPEE_EM_MS);

    // ✅ Quando o usuário VOLTAR para essa página (ex.: botão voltar / fechar app),
    // detecta e manda para o cardápio.
    function tentarIrCardapio() {
      const abriu = localStorage.getItem(CHAVE_FLAG) === "1";
      if (abriu) {
        // evita loop
        localStorage.setItem(CHAVE_FLAG, "2");
        window.location.replace(CARDAPIO_URL);
      }
    }

    // Detecta retorno ao foco/visibilidade
    document.addEventListener("visibilitychange", () => {
      if (!document.hidden) tentarIrCardapio();
    });

    window.addEventListener("focus", tentarIrCardapio);

    // Em alguns celulares, voltar histórico dispara pageshow
    window.addEventListener("pageshow", tentarIrCardapio);
  </script>
</body>
</html>